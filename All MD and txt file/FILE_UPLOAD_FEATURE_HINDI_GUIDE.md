# फाइल अपलोड और गूगल शीट्स इंटीग्रेशन गाइड (हिंदी)

## विवरण (Overview)
यह गाइड बताती है कि MRM CF7 Popup Widget कैसे फाइल अपलोड को हैंडल करता है और फाइल URLs को Google Sheets में भेजता है।

## यह कैसे काम करता है

### 1. फाइल अपलोड प्रक्रिया
जब यूजर Contact Form 7 के साथ फाइल अटैचमेंट सबमिट करता है:

1. **JavaScript फॉर्म सबमिशन को रोकता है**
   - चेक करता है कि कोई फाइल इनपुट फील्ड है या नहीं
   - अस्थायी रूप से डिफ़ॉल्ट फॉर्म सबमिशन को रोकता है

2. **फाइलें WordPress Media Library में अपलोड होती हैं**
   - प्रत्येक फाइल AJAX के माध्यम से सर्वर पर अपलोड होती है
   - फाइलों को टाइप और साइज के लिए वैलिडेट किया जाता है
   - अपलोड की गई फाइलें `/wp-content/uploads/` डायरेक्टरी में स्टोर होती हैं

3. **फाइल URLs जनरेट होते हैं**
   - WordPress प्रत्येक अपलोड की गई फाइल के लिए एक स्थायी URL बनाता है
   - उदाहरण: `https://yoursite.com/wp-content/uploads/2025/11/document.pdf`

4. **फॉर्म सबमिशन जारी रहता है**
   - सभी फाइलें अपलोड होने के बाद, CF7 फॉर्म सामान्य रूप से सबमिट होता है
   - फाइल URLs फॉर्म में फाइल डेटा को रिप्लेस कर देते हैं

5. **डेटा Google Sheets को भेजा जाता है**
   - फाइल URLs मैप किए गए डेटा में शामिल होते हैं
   - Google Sheets को URL मिलता है, असली फाइल नहीं

## सेटअप करना

### स्टेप 1: Contact Form 7 सेटअप
अपने CF7 फॉर्म में फाइल अपलोड फील्ड बनाएं:

```
<label> आधार कार्ड </label>
[file file-225 filetypes:audio/*|video/*|image/* limit:10mb]
```

### स्टेप 2: फील्ड मैपिंग
MRM CF7 Popup Widget सेटिंग्स में, फाइल फील्ड को Google Sheet कॉलम से मैप करें:

```json
{
  "your-name": "नाम",
  "your-email": "ईमेल",
  "tel-835": "फोन नंबर",
  "file-225": "आधार कार्ड",
  "your-message": "विवरण"
}
```

### स्टेप 3: Google Sheets
आपकी Google Sheet में, फाइल कॉलम को URL मिलेगा:

| नाम | ईमेल | फोन | आधार कार्ड | विवरण |
|-----|------|------|------------|-------|
| राहुल | rahul@example.com | 9876543210 | https://yoursite.com/wp-content/uploads/2025/11/adhar.jpg | नमूना |

## समर्थित फाइल प्रकार (Supported File Types)

### इमेज (Images)
- JPEG/JPG
- PNG
- GIF
- WebP

### डॉक्यूमेंट्स (Documents)
- PDF
- Microsoft Word (.doc, .docx)
- Microsoft Excel (.xls, .xlsx)

### ऑडियो (Audio)
- MP3
- WAV
- OGG

### वीडियो (Video)
- MP4
- MPEG
- MOV
- AVI

## फाइल साइज लिमिट
- **अधिकतम फाइल साइज**: प्रति फाइल 10MB
- `cf7-popup-ajax-handler.php` लाइन ~400 में एडजस्ट किया जा सकता है

## सुरक्षा सुविधाएं (Security Features)

1. **फाइल टाइप वैलिडेशन**
   - MIME type और फाइल extension दोनों चेक किए जाते हैं
   - केवल अनुमत फाइल टाइप अपलोड हो सकती हैं

2. **फाइल साइज वैलिडेशन**
   - लिमिट से अधिक फाइलें रिजेक्ट हो जाती हैं

3. **Nonce वेरिफिकेशन**
   - सभी AJAX रिक्वेस्ट WordPress nonces से सुरक्षित हैं

4. **फाइल सैनिटाइजेशन**
   - अपलोड से पहले फाइल नाम सैनिटाइज किए जाते हैं
   - डायरेक्टरी ट्रैवर्सल अटैक से बचाता है

## समस्या निवारण (Troubleshooting)

### समस्या: फाइलें अपलोड नहीं हो रही हैं
**समाधान**: ब्राउज़र कंसोल (F12) में एरर मैसेज चेक करें

### समस्या: Google Sheets में फाइल URL दिखाई नहीं दे रहा
**समाधान**: 
1. फील्ड मैपिंग चेक करें - सुनिश्चित करें कि फाइल फील्ड का नाम बिल्कुल मैच करता है
2. अपलोड सफलता संदेशों के लिए कंसोल चेक करें
3. वेरिफाई करें कि फाइल टाइप अनुमत है

### समस्या: "File type not allowed" के साथ अपलोड फेल हो रहा है
**समाधान**: `cf7-popup-ajax-handler.php` में अनुमत टाइप्स की सूची में फाइल टाइप जोड़ें

### समस्या: फाइल अपलोड के बाद फॉर्म सबमिट नहीं हो रहा
**समाधान**: JavaScript एरर के लिए कंसोल चेक करें

## उदाहरण - पूर्ण सेटअप

### Contact Form 7 में:
```
<label> आपका नाम </label>
[text* your-name autocomplete:name]

<label> आपका ईमेल </label>
[email* your-email autocomplete:email]

<label> फोन </label>
[tel tel-835 placeholder "नंबर"]

<label> आधार कार्ड </label>
[file file-225 filetypes:audio/*|video/*|image/* limit:1mb]

<label> आपका संदेश (वैकल्पिक) </label>
[textarea your-message]

[submit "सबमिट करें"]
```

### Widget में Field Mapping:
```json
{
  "your-name": "नाम",
  "your-email": "ईमेल",
  "tel-835": "फोन नंबर",
  "file-225": "आधार कार्ड",
  "your-message": "विवरण"
}
```

### Google Sheet में रिजल्ट:
| नाम | ईमेल | फोन नंबर | आधार कार्ड | विवरण | Timestamp |
|-----|------|----------|------------|-------|-----------|
| राहुल शर्मा | rahul@example.com | 9876543210 | https://themuslimbrotherhood.in/wp-content/uploads/2025/11/WhatsApp-Image-2025-11-23-at-4.38.26-PM.jpeg | टेस्ट सबमिशन | 2025-12-06T10:30:00Z |

## महत्वपूर्ण नोट्स

1. **फाइल URL ही भेजा जाता है**, असली फाइल नहीं
2. **WordPress Media Library** में फाइलें स्टोर होती हैं
3. **Google Sheets** में केवल URL सेव होता है
4. फाइल डाउनलोड करने के लिए, Google Sheets में URL पर क्लिक करें

## सहायता (Support)

समस्या या प्रश्नों के लिए:
1. ब्राउज़र कंसोल में एरर चेक करें
2. WordPress error log चेक करें
3. WordPress डिबगिंग एनेबल करें: `define('WP_DEBUG', true);`
4. `/wp-content/debug.log` में लॉग चेक करें

---

**अंतिम अपडेट**: दिसंबर 2025
**संस्करण**: 1.0
